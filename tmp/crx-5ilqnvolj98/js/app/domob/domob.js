define("app/domob/domob",[],function(a,b){"use strict";function c(){var a=(new Date).valueOf();return Math.floor(a/1e3)}function d(a){var b=window.location.search;if(b.length>1){b=b.substring(1);for(var c=b.split("&"),d=c.length,e=0;d>e;e++){var f=c[e].split("=");if(f&&2==f.length&&f[0]==a)return decodeURIComponent(f[1])}}return""}function e(){n.ipb=d("ipb"),n.openId=d("openid"),n.prv=d("prv"),n.sign=d("sign")}function f(){var a="?";return a+="ipb="+encodeURIComponent(n.ipb),a+="&openid="+encodeURIComponent(n.openId),a+="&prv="+encodeURIComponent(n.prv),a+="&sign="+encodeURIComponent(n.sign),a+="&vs="+n.Version}function g(){return{ipb:n.ipb,openid:n.openId,ts:c(),prv:n.prv,myRand:Math.random(),sign:n.sign}}function h(a,b){m.ajax({url:o.url,type:o.type,data:m.extend(g(),{id:a.id,type:0}),success:function(a){"object"==typeof a&&a.crp_url?b(a):1==r.count?setTimeout(k,2e3):r.setCount(r.count-1)},error:function(){1==r.count?setTimeout(k,2e3):r.setCount(r.count-1)}})}function i(a){var b=a.crp_url;b?(b+=b.indexOf("?")>0?f().substring(1)+"&ts="+c():f()+"&ts="+c(),m.ajax({url:a.crp_url,data:b,type:"post",success:function(a){if("string"==typeof a)try{a=JSON.parse(a)}catch(b){return!1}a&&0==a.status?(l.sendMusic(),1==r.count?setTimeout(k,2e3):r.setCount(r.count-1)):setTimeout(k,2e3)},error:function(){1==r.count?setTimeout(k,2e3):r.setCount(r.count-1)}})):setTimeout(k,2e3)}function j(a,b){q++,console.log("-----------count----------"+q+"------time@-----"+new Date),m.ajax({url:p.url,type:p.type,data:g(),success:function(c){var d=[];c&&(!c.list||(d=c.list),0!=d.length)?(r.setCount(d.length),r.setLength(d.length),m.each(d,function(c,d){console.log("--------------------任务名称:"+d.name+"-----------------任务价格："+d.price+"------"),d.received||0==d.restNum?1==r.count?setTimeout(k,2e3):r.setCount(r.count-1):a(d,b)})):setTimeout(k,2e3)},error:function(){setTimeout(k,2e3)}})}function k(){j(h,i)}var l=(a("../../common/redirect"),a("../../common/music")),m=a("jquery"),n=(a("../../common/paraMng"),{}),o={url:"/wx/ceo/detail",type:"get"},p={url:"/wx/ceo/ads",type:"get"},q=0,r={count:0,length:0};r.setCount=function(a){this.count=a},r.setLength=function(a){this.length=a},b.start=function(){e(),k()}});