define("app/atm/atm",[],function(a,b){"use strict";function c(a){var b,c=a.length,d=c-1;if(a.length>1)for(var e=a.length-1;e>0;--e)for(var f=0;e>f;++f)a[f].number>a[f+1].number&&(b=a[f],a[f]=a[f+1],a[f+1]=b);var g={index:d,current:function(){return a[this.index]}};return g.hasNext=function(){return this.index>0?!0:!1},g.next=function(){return this.index--,g},g}function d(a){function b(a){var b={user:k,ad_id:a.ad_id,ad_name:a.name,ad_icon:a.icon,price:a.number},c=new FormData;for(var d in b)c.append(d,b[d]);h.ajax({url:"http://api.91atm.com/trial/task/",method:"POST",data:c,beforeSend:function(a){a.setRequestHeader("Authorization","Token "+j)},contentType:!1,processData:!1,success:function(){f.sendMusic(),setTimeout(e,2e3)},error:function(){setTimeout(e,2e3)}})}var d=c(a);b(d.current())}function e(){if(!i)return void console.log("cookie 配置失败");var a=JSON.parse(i),b=new FormData;for(var c in a)b.append(c,a[c]);h.ajax({url:"http://api.91atm.com/trial/",method:"POST",contentType:!1,processData:!1,beforeSend:function(a){a.setRequestHeader("Authorization","Token "+j)},data:b,success:function(a){console.log(a);var b=[];if(a.offers.length>0)for(var c=a.offers,f=!1,g=0;g<c.length;g++)console.log("------任务名称:"+c[g].name+"----------任务数量:"+c[g].number),c[g].ongoing&&(f=!0),c[g].remain&&!c[g].ongoing&&b.push(c[g]);f&&(b=[]),b.length>0?d(b):setTimeout(e,2e3)},error:function(){setTimeout(e,2e3)}})}var f=a("../../common/music"),g=a("../../common/paraMng"),h=a("jquery");g.getPostData(),localStorage.installed="1";var i=localStorage.postData;localStorage["91atm"]=i;var j=localStorage.token,k=localStorage.user;g.getAtmAuth(j),h(".alert-wrap").css({display:"none"}),b.start=function(){e()}});